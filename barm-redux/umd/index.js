!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("barm"),require("immer")):"function"==typeof define&&define.amd?define(["exports","barm","immer"],n):n((e=e||self)["barm-redux"]={},e.barm,e.produce)}(this,function(e,i,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function a(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function o(e,n){return"function"==typeof n?t(e,function(e){n(e)}):e}o.key="applyReducerImmer";var f;e.createStore=function(e,n){var t=n,u=e||o,r=new Set,c={cache:{},connect:function(r,o){return function(e){return a(n,t=i.Component),n;function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=r?r(c.getState()):void 0,n.dispatchs=o?o(c.getState()):void 0,n.unSubscribe=null,n.componentWillMount=function(){n.unSubscribe=c.subscribe(function(e){n.setState(r(e))})},n.componentWillUnmount=function(){n.unSubscribe&&(n.unSubscribe(),n.unSubscribe=null)},n.render=function(){return i.html(f=f||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n              <"," dispatch="," ..."," ..."," />\n            "],["\n              <"," dispatch="," ..."," ..."," />\n            "]),e,c.dispatch,n.dispatchs,n.state)},n}var t}},defineConnect:function(t,r,o){return function(e){var n=t+"-"+Math.random().toString(36).slice(2,8);i.define(n)(e),i.define(t)(c.connect(r,o)(n))}},dispatch:function(e){t=u(t,e),r.forEach(function(e){e(t)})},update:function(e){return c.dispatch(e)},defineConsumer:function(e){function n(){var i=null!==t&&t.apply(this,arguments)||this;return i.lastMemo=[],i.unSubscribe=null,i.componentWillMount=function(){var o=i.props.subscribe;i.lastMemo=o(c.getState());var u=i.lastMemo.length;i.unSubscribe=c.subscribe(function(e){for(var n=o(e),t=!1,r=0;r<u;r++)if(i.lastMemo[r]!==n[r]){t=!0;break}i.lastMemo=n,t&&i.focusUpdate()})},i.componentWillUnmount=function(){i.unSubscribe&&(i.unSubscribe(),i.unSubscribe=null)},i.render=function(){return i.props.children.apply(void 0,i.lastMemo)},i}var t;i.define(e)((a(n,t=i.Component),n))},getState:function(){return t},subscribe:function(e){return r.has(e)||r.add(e),function(){r.delete(e)}},applyMiddleware:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){var n=e(c.getState,c.dispatch),t=n.getState,r=n.dispatch;c.dispatch=r,c.getState=t})},applyReducer:function(r){if(r.key){if(c.cache[r.key])return;c.cache[r.key]=r.key}var o=u;u=function(e,n){var t=o(e,n);return r(t,n)}}};return c},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
